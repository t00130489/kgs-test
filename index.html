<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>興学思想テスト 早押しクイズバトル</title>
  <link rel="stylesheet" href="style.css">
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-QEP0467K9D"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-QEP0467K9D');
  </script>
</head>
<body>
  <header>
    <h1>興学思想早押しクイズ <span class="version">v20250723</span></h1>
  </header>

  <main>
    <!-- ルーム作成＆参加 -->
    <section id="home">
      <div class="card">
        <h2>新しいルームを作成</h2>
        <div class="form-row range-row">
          <span class="range-label">出題範囲：</span>
          <div id="chapter-selection">
            <label><input type="checkbox" value="0"> 序章</label>
            <label><input type="checkbox" value="1"> 第一章</label>
            <label><input type="checkbox" value="2"> 第二章</label>
            <label><input type="checkbox" value="3"> 第三章</label>
            <label><input type="checkbox" value="4"> 第四章</label>
            <label><input type="checkbox" value="5"> 第五章</label>
            <label><input type="checkbox" value="6"> 第六章</label>
            <label><input type="checkbox" value="7"> 第七章</label>
            <label class="wide"><input type="checkbox" id="grad-range"> 大学院の範囲（序・一・四・七）</label>
            <label class="wide"><input type="checkbox" id="all-range"> 全範囲</label>
          </div>
        </div>
        <div class="form-row">
          <label><span class="range-label">出題問題数：</span>
            <input type="number" id="room-count" value="20" min="1" max="999">
          </label>
        </div>
        <button id="createBtn" class="btn-primary">ルーム作成</button>
      </div>

      <div class="card">
        <h2>ルームへ参加</h2>
        <div class="form-row join-row">
          <input id="roomIdInput" type="text" inputmode="numeric" pattern="[0-9]*" maxlength="5" placeholder="ルームID（数字）">
          <button id="joinRoomBtn" class="btn-secondary">参加</button>
        </div>
      </div>

      <section id="description" class="card">
        <h2>使い方・ルール</h2>
        <p>ぼっち勉強用 兼 みんなでワイワイ用の興学思想早押しクイズです。</p>
        <ol>
          <li>出題範囲と問題数を決めてルームを作成してください。</li>
          <li>他の参加者にルームIDを共有して参加をしてもらってください。</li>
          <li>全員が揃ったらオーナーは問題をスタートしてください。</li>
          <li>問題は早押し形式で、最初にボタンを押した人に15秒の回答時間が与えられます。</li>
          <li>誤答やタイムアップの場合は他の参加者のみで問題を再開します。</li>
          <li>誤答するとその問題は回答できなくなり、全員が誤答したらその問題は終了します。</li>
          <li>全ての問題が終了したら、結果画面でスコアと問題の内容を確認できます。</li>
        </ol>
        <p>このクイズは試作版なのでバグもあります。何かあったら教えてください。<br>PKG南大沢校　髙橋悠並</p>
      </section>
    </section>

    <!-- クイズ画面 -->
    <section id="quiz-app" class="hidden">
      <div class="info-bar room-info">
        <span>ルームID： <strong id="currentRoomId" class="highlight"></strong></span>
        <span class="gap"></span>
        <span>参加者： <ul id="players" class="highlight inline-list"></ul></span>
      </div>
      <div class="info-bar quiz-settings">
        <span>出題範囲： <strong id="room-range" class="highlight"></strong></span><br>
        <span>問題数： <strong id="currentNum" class="highlight">0</strong>/<strong id="totalNum" class="highlight">0</strong></span>
      </div>
      <div class="start-row centered">
        <button id="startBtn" class="btn-primary large">問題スタート</button>
      </div>

      <div id="pre-countdown" class="countdown"></div>
      <div id="question-label" class="question-label"></div>
      <div id="question" class="question"></div>
      <div id="question-timer" class="timer"></div>

      <button id="buzzBtn" class="buzz-btn">早押し！</button>
      <div id="status" class="status"></div>

      <div id="answer-area" class="answer-area hidden">
        <div class="answer-controls">
          <input id="answerInput" maxlength="15" class="answer-input" placeholder="解答">
          <button id="answerBtn" class="btn-primary small">解答</button>
        </div>
        <div id="answer-timer" class="timer"></div>
      </div>

      <button id="nextBtn" class="btn-secondary" disabled>次の問題へ</button>
    </section>

    <!-- 結果画面 -->
    <section id="results" class="hidden card"></section>
  </main>

  <!-- フィードバックオーバーレイ -->
  <div id="feedback-overlay" class="feedback-overlay hidden"></div>

  <script type="module" src="script.js"></script>
</body>
</html>
